'use client'

import { createContext, useContext, useState, useEffect, ReactNode } from 'react'

export type Language = 'ja' | 'en'

const LANGUAGE_KEY = 'fomus-guild-language'

const translations = {
  ja: {
    // Landing Page
    landingTitle: 'グローバル枡コミュニティに参加しよう',
    landingSubtitle: 'FOMUS GUILDは、世界中の枡愛好家をつなぐ招待制コミュニティです',
    joinGuild: 'ギルドに参加',
    login: 'ログイン',
    features: '特徴',
    feature1Title: 'デジタル会員証',
    feature1Desc: 'ユニークなデジタル会員証で特典を受けられます',
    feature2Title: 'グローバルネットワーク',
    feature2Desc: '世界中の枡愛好家とつながりましょう',
    feature3Title: '限定特典',
    feature3Desc: 'メンバー限定の割引やイベントにアクセス',
    howToJoin: '参加方法',
    step1: '既存メンバーから招待コードを受け取る',
    step2: 'メールアドレスを登録',
    step3: 'メンバーシップを開始',
    invitationOnly: '招待制コミュニティ',
    invitationOnlyDesc: 'FOMUS GUILDは招待制です。既存メンバーから招待コードを受け取ってください。',
    haveInviteCode: '招待コードをお持ちですか？',
    enterInviteCode: '招待コードを入力',
    alreadyMember: '既存メンバーの方',

    // Invite Page
    welcomeToGuild: 'FOMUS GUILDへようこそ',
    youveBeenInvited: '限定コミュニティへ招待されました',
    enterEmail: 'メールアドレスを入力',
    continueWithEmail: 'メールで続ける',
    freeInvitation: '招待（無料）',
    afterVerification: 'メール確認後、$10/月のサブスクリプションでメンバーシップを開始できます',
    freeAccess: '無料でFOMUS GUILDにアクセスできます。支払いは不要です。',
    checkYourEmail: 'メールを確認してください',
    magicLinkSent: 'にマジックリンクを送信しました',
    clickLinkToRegister: 'メールのリンクをクリックして登録を完了してください',
    invalidInvitation: '無効な招待コード',
    invalidInvitationDesc: 'この招待コードは有効ではありません。招待者にお問い合わせください。',
    invitationUsed: '使用済みの招待コード',
    invitationUsedDesc: 'この招待コードは既に使用されています。既に登録済みの場合はログインしてください。',
    goToLogin: 'ログインへ',
    returnHome: 'ホームに戻る',
    proceedToPayment: '決済に進む',
    verifyingPayment: '決済を確認中...',
    sendingEmail: 'メールを送信中...',
    paymentComplete: '決済完了！',
    errorOccurred: 'エラーが発生しました',
    invalidSession: '無効なセッションです',

    // Login Page
    loginTitle: 'FOMUS GUILD',
    loginSubtitle: 'グローバル枡コミュニティに参加',
    newRegistration: '新規登録',
    existingMemberLogin: '既存メンバーログイン',
    enterRegisteredEmail: '登録済みのメールアドレスを入力してください',
    emailAddress: 'メールアドレス',
    sendLoginLink: 'ログイン',
    sending: '送信中...',
    loginLinkSent: 'ログインリンクをメールで送信しました。メールをご確認ください。',
    inviteCode: '招待コード',
    inviteCodePlaceholder: '例: ABC12345',
    noInviteCode: '招待コードがない場合は、既存メンバーから招待を受けてください',
    next: '次へ',
    checking: '確認中...',
    invalidCode: 'この招待コードは無効です',
    codeAlreadyUsed: 'この招待コードは既に使用されています',
    inviteConfirmed: '招待コード確認完了',
    freeInvite: '（無料招待）',
    sendRegisterLink: '登録リンクを送信',
    changeInviteCode: '← 招待コードを変更',
    freeJoinGuild: '無料でFOMUS GUILDに参加できます',
    paidJoinGuild: 'メール確認後、$10/月のサブスクリプションで参加できます',
    checkEmailForRegister: 'メールを確認してください',
    registerLinkSent: 'に登録リンクを送信しました',
    clickLinkToComplete: 'メールのリンクをクリックして登録を完了してください',
    backToHome: '← ホームに戻る',

    // Subscribe Page
    membershipTitle: 'FOMUS GUILD メンバーシップ',
    membershipDesc: 'ギルドメンバーとして全機能にアクセスできます',
    redirectingToPayment: '決済ページへ移動中...',
    paymentCanceled: '決済がキャンセルされました。もう一度お試しください。',
    benefit1: 'デジタル会員証',
    benefit2: 'ギルドマップでメンバーを閲覧',
    benefit3: 'クエストに参加してポイント獲得',
    benefit4: 'メンバー限定特典・オファー',
    subscribeJapan: '¥980/月 で登録',
    subscribeIntl: '$10/month で登録',
    cancelAnytime: 'いつでもキャンセル可能です。決済はStripeで安全に処理されます。',
    logout: 'ログアウト',

    // Pending Page
    pendingWelcome: 'FOMUS GUILD へようこそ！',
    pendingActiveRedirecting: 'メンバーシップが有効になりました。ダッシュボードへ移動中...',
    pendingActivating: 'メンバーシップを有効化中',
    pendingProcessing: 'お支払いを処理しています。通常は数秒で完了します...',
    pendingTakingLong: '通常より時間がかかっています',
    pendingTryRefresh: 'しばらく経っても変わらない場合は、ページを更新するかサポートにお問い合わせください。',
    pendingRefresh: 'ステータスを更新',

    // Header
    membershipCard: 'メンバーシップカード',

    // Card
    guildMember: 'ギルドメンバー',
    memberSince: '加入日',
    points: 'Guild EXP',
    rank: 'ランク',

    // Navigation
    card: 'カード',
    map: 'マップ',
    offers: 'クエスト',
    profile: 'プロフィール',
    admin: '管理',

    // Dashboard
    dashboard: 'ダッシュボード',
    masuPoints: 'MASU ポイント',
    noActivity: 'まだアクティビティがありません',
    maxRank: '最高ランク',
    notSet: '未設定',
    ptsToNext: '次まで',

    // Recent Activity
    recentActivity: '最近のアクティビティ',
    hubCheckin: 'Hub チェックイン',
    eventAttendance: 'イベント参加',
    welcomeBonus: 'ウェルカムボーナス',

    // Map
    members: 'メンバー',
    hubs: 'Hub',
    masuHubs: 'MASU Hubs',
    searchPlaceholder: '名前、都市、国で検索...',
    allCountries: 'すべての国',
    clearFilters: 'フィルターをクリア',
    showing: '表示中',
    clickMapToSelect: 'マップをクリックして場所を選択',
    cancel: 'キャンセル',
    shopName: '店舗名',
    description: '説明',
    country: '国',
    city: '都市',
    location: '場所',
    change: '変更',
    addShop: '店舗を追加',
    saving: '保存中...',
    openInGoogleMaps: 'Google Mapsで開く',
    website: 'ウェブサイト',

    // Offers
    guildOffers: 'ギルド特典',
    partnerCafeDiscount: 'パートナーカフェ10%OFF',
    showMemberCard: 'メンバーカードを提示で割引',
    freeCoworkingPass: 'コワーキング1日パス無料',
    validAtAllHubs: '世界中のMASU Hubで利用可能',
    exclusiveEventAccess: '限定イベントアクセス',
    priorityAccess: 'ギルドイベントへの優先アクセス',
    vipLoungeAccess: 'VIPラウンジアクセス',
    premiumFacilities: 'プレミアム施設へのアクセス',

    // Profile
    memberSinceDate: '加入',
    rankProgress: 'ランク進捗',
    pointsToNextRank: '次のランクまで',
    editProfile: 'プロフィール編集',
    manageSubscription: 'サブスクリプションを管理',
    managingSubscription: 'リダイレクト中...',
    signOut: 'サインアウト',
    inviteFriends: '友達を招待',
    inviteFriendsDesc: '招待コードを発行して友達をFOMUS GUILDに招待できます。招待された方は月額会員として参加できます。',
    generateInviteCode: '招待コードを発行',
    inviteCodeCreated: '招待コードを作成しました！',
    inviteUrlCopied: '招待URLをクリップボードにコピーしました',
    showGeneratedCodes: '発行済みコードを表示',
    generatedCodes: '発行済みコード',
    unused: '未使用',
    used: '使用済み',
    copyUrl: 'URLをコピー',
    copyCode: 'コード',
    copyLink: 'リンク',
    tapToCopy: 'タップでコピー',
    copied: 'コピー済み!',
    noCodesYet: 'まだ招待コードを発行していません',

    // Admin
    adminPanel: '管理パネル',
    invites: '招待',
    inviteCodes: '招待コード',
    generate: '生成',
    available: '利用可能',

    // OTP / Verification
    enterVerificationCode: '認証コードを入力',
    verificationCode: '認証コード',
    codeSentTo: 'に送信されたコードを入力してください',
    verifyAndLogin: 'ログイン',
    verifyAndRegister: '認証して登録',
    register: '登録する',
    sendVerificationCode: '認証コードを送信',
    changeEmail: 'メールアドレスを変更する',
    invalidCodeRetry: 'コードが正しくありません。もう一度お試しください。',
    invalidCodeError: 'コードが正しくありません',
    loggingIn: 'ログイン処理中...',
    codeSentSuccess: '認証コードをメールに送信しました。',
    serverError: 'サーバーエラーが発生しました。しばらく待ってから再度お試しください。',

    // Map Page
    guildMap: 'ギルドマップ',
    exploreMembers: 'メンバーとMASU Hubを世界中で探索',
    exploreHubs: 'MASU Hubを世界中で探索',
    upgradeSeeMembers: 'アップグレードしてメンバーの場所を表示',
    upgradeSeeMembersDesc: '無料メンバーはMASU Hubの場所のみ閲覧できます。アップグレードして全メンバーを表示しましょう。',
    upgrade: 'アップグレード',
    fullscreen: '全画面',
    viewFullscreen: '全画面で表示',
    search: '検索...',
    clear: 'クリア',
    showingResults: '表示中',
    membersCount: 'メンバー',
    hubsCount: 'Hub',
    pendingInvites: '招待中',

    tapToFlip: 'タップで裏面を見る',

    // Offers Page
    offersTitle: '特典',
    memberOffersAndQuests: 'メンバー限定の特典とクエスト',
    upgradeForOffers: '特典へのアクセスにはアップグレードが必要です',
    upgradeForOffersDesc: 'サービス特典とクエストは有料メンバー限定です。メンバーシップをアップグレードして、割引や特別チャレンジなどの特典をご利用ください。',
    fomusServices: 'FOMUSのサービス',
    quests: 'クエスト',
    noQuestsAvailable: '現在利用可能なクエストはありません',
    stayTuned: '新しいチャレンジをお楽しみに！',
    exclusiveArticles: '限定記事',
    noArticlesAvailable: '現在公開中の記事はありません',
    stayTunedArticles: '新しい記事をお楽しみに！',
    comingSoon: '近日公開',
    pointExchange: 'ポイント交換所',
    pointExchangeDesc: '溜まったポイントは、将来的に、さまざまな商品やサービスと交換できるようになります。',
    pointExchangeComingSoon: '交換アイテムは順次追加されます',
    pointExchangeStayTuned: 'お楽しみに！',
    statusPoints: 'Guild EXP',
    exchangeHistory: '交換履歴',
    exchangeConfirm: 'このアイテムと交換しますか？',
    exchangeSuccess: '交換申請が完了しました！',
    exchangeInsufficientPoints: 'ポイントが不足しています',
    exchangeOutOfStock: '在庫切れです',
    exchangeStatusPending: '申請中',
    exchangeStatusApproved: '承認済み',
    exchangeStatusRejected: '却下',
    exchangeStatusCanceled: 'キャンセル',
    exchangeCouponCode: 'クーポンコード',
    exchangePointsCost: '必要ポイント',
    exchangeStock: '在庫',
    exchangeStockUnlimited: '無制限',
    exchangeApprove: '承認',
    exchangeReject: '却下',
    exchangeCreateItem: 'アイテム作成',
    exchangeEditItem: 'アイテム編集',
    exchangeItemName: 'アイテム名',
    exchangeItemNameEn: 'アイテム名（英語）',
    exchangeItemDesc: '説明',
    exchangeItemDescEn: '説明（英語）',
    exchangeButton: '交換する',
    exchangeOrders: '交換注文',
    exchangeItems: '交換アイテム',
    exchangeBalance: 'MASU ポイント残高',
    invitesLabel: '招待人数',
    // Quest Card & Modal
    questTypePhoto: 'フォトクエスト',
    questTypeCheckin: 'チェックイン',
    questTypeAction: 'アクション',
    questRepeatable: '繰り返し可',
    questPoints: 'ポイント',
    questCompleted: '完了',
    questPendingReview: '審査中',
    questSubmitPhoto: '写真を投稿',
    questChallenge: 'チャレンジ',
    questOnApproval: '承認時に付与',
    questDropImage: 'ここに画像をドロップまたはクリックしてアップロード',
    questMaxFileSize: '最大5MB、JPG/PNG/GIF',
    questClickToChange: 'クリックまたはドラッグで変更',
    questCommentLabel: 'コメント（任意）',
    questCommentPlaceholder: 'コメントを追加...',
    questCancel: 'キャンセル',
    questSubmit: '投稿する',
    questPreviousSubmissions: '過去の投稿',
    questStatusApproved: '承認済み',
    questStatusRejected: '却下',
    questStatusPending: '審査中',
    questErrorImageOnly: '画像ファイルをアップロードしてください',
    questErrorFileSize: 'ファイルサイズは5MB以下にしてください',
    questErrorSelectImage: '画像を選択してください',
    questErrorUploadFailed: '画像のアップロードに失敗しました',
    questErrorSubmitFailed: '投稿の送信に失敗しました',
    questErrorGeneral: 'エラーが発生しました',
    fomusDesc: '日本の伝統工芸「枡」を起点に、アート・物語・テクノロジーを掛け合わせ、新たな文化の表現と価値創造に挑むブランド。',
    masuDesc: 'FOMUSの原点。国産ヒノキを使った最高品質の枡。',
    masuPhotoDesc: '世界中で『枡を持って撮る』アートプロジェクト。【※15ヶ国・2025年12月現在】枡が人と文化をつなぐ表現を可能に。',
    fomusParureDesc: '世界最小サイズの枡を活用したジュエリーブランド。',
    masukameDesc: '枡（益＝繁栄）と亀（長寿）を一体化した世界で唯一のアート作品。',
    kukuDesc: '精霊と木の神をめぐる物語。絵本・小説・アニメ・グッズへと展開する長編物語。鋭意制作中。',
    silvaDesc: '世界初、枡を使って遊べるカードゲーム。子どもからご年配の方まで遊べます。',
    architectureDesc: '文化・伝統・ブランドの伴走支援。ストーリー設計から実装まで。',
    sagishimaDesc: '広島県の佐木島にあるアートギャラリー。枡の壁「枡ウォール」と「枡の額縁」をプロデュース。',

    // Profile Page
    profileSettings: 'プロフィール設定',
    personalInfo: '個人情報',
    displayName: '表示名',
    profileImage: 'プロフィール画像',
    profileImageDesc: '正方形にクロップされ、マップ上のアイコンとして表示されます（最大500MB、自動圧縮）',
    masuPhotoRecommend: '枡フォトを撮った方は、ぜひ枡フォトをアイコンに設定するのがおすすめです！',
    locationMissing: 'マップに表示するため、国・都道府県・市区町村を入力してください！',
    questProfileComplete: 'クエスト達成！「プロフィールを完成させよう」',
    questMapVisible: 'クエスト達成！「マップに自分を表示しよう」\nあなたのプロフィールがマップに掲載されました！',
    questPointsEarned: 'pt獲得！',
    selectImage: '画像を選択',
    compressing: '圧縮中...',
    removeImage: '削除',
    locationInputNote: '日本語または英語で入力できます（例: 日本 / Japan, 東京都 / Tokyo）',
    countryLabel: '国 / Country',
    stateLabel: '県 / State',
    cityLabel: '市 / City',
    pinLocation: 'ピンの位置',
    geocodingLabel: '取得中...',
    reGeocode: '住所から再取得',
    adjustPinDesc: 'マップをタップ/ピンチでズームしてピンの位置を調整',
    setPinDesc: '住所から位置を取得中...マップをタップしてピンを設置',
    showLocationOnMap: 'マップに位置を表示',
    showLocationDesc: '他のメンバーがギルドマップであなたの位置を確認できます',
    saveChanges: '変更を保存',
    membership: 'メンバーシップ',
    membershipIdLabel: 'メンバーシップID',
    statusLabel: 'ステータス',
    active: 'アクティブ',
    inactive: '非アクティブ',
    email: 'メール',
    viewProfileLink: 'プロフィールを見る →',
    fileTooLarge: 'ファイルサイズが大きすぎます',
    selectImageFile: '画像ファイルを選択してください',
    imageUploaded: '画像をアップロードしました',
    imageUploadFailed: '画像のアップロードに失敗しました',
    profileUpdated: 'プロフィールを更新しました',

    // Language
    languageSetting: '言語設定',
    languageSettingDesc: 'ページの表示言語を切り替えます',
    japanese: '日本語',
    english: 'English',

    // UpgradeBanner
    upgradeToUnlock: 'アップグレードして解除',
    upgradeFeatureDesc: 'この機能は有料メンバー限定です。メンバーシップをアップグレードして全機能にアクセスしましょう。',
    upgradeNow: '今すぐアップグレード',
    freeViewHubs: '無料メンバーはMASU Hubの場所をマップで閲覧できます',

    // Super Admin
    superAdmin: 'スーパー',

    // Guide Page
    guideTitle: '使い方ガイド',
    guideEnterGuild: 'ギルドに入る',
    guideWhatIsTitle: 'FOMUS GUILDとは',
    guideWhatIsDesc: 'FOMUS GUILDは、日本の伝統工芸「枡（MASU）」を起点に、世界中の仲間をつなぐ招待制コミュニティです。メンバーは「ユーザー」ではなく、文化づくりの仲間として迎えられます。',
    guideWhatIsInvite: '既存メンバーからの招待で参加できます',
    guideWhatIsGlobal: '世界中のメンバーとつながれます',
    guideWhatIsCulture: '枡（MASU）文化を一緒に広げましょう',
    guideCardTitle: 'メンバーシップカード',
    guideCardDesc: 'ギルドに参加すると、デジタル会員証が発行されます。ランク・ポイント・会員番号が表示され、あなたのギルドでの活動を証明します。',
    guideCardRankSystem: '7段階ランクシステム',
    guideCardRanks: 'E → D → C → B → A → S → SS',
    guideCardRankDesc: 'ポイントを貯めてランクアップ！活動に応じてランクが上がります。',
    guideMapTitle: 'ギルドマップ',
    guideMapDesc: '世界中のメンバーの分布をマップで確認できます。また、MaSU Hub（提携店舗・スポット）を発見して、リアルなつながりを作りましょう。',
    guideMapMembers: 'メンバーの位置を世界地図で確認',
    guideMapHubs: 'MaSU Hub（提携スポット）を発見',
    guideMapConnect: 'リアルなつながりを作る',
    guideQuestTitle: 'クエスト & 特典',
    guideQuestDesc: 'クエストに参加してポイントを獲得しましょう。FOMUS関連サービスへのアクセスや、メンバー限定の特典も用意されています。',
    guideQuestEarn: 'クエストをクリアしてポイント獲得',
    guideQuestServices: 'FOMUS関連サービスにアクセス',
    guideQuestArticles: '限定記事（近日公開）',
    guideQuestExchange: '溜まったポイントは将来さまざまな商品やサービスと交換可能',
    guideBonusTitle: 'ログインボーナス',
    guideBonusDesc: '毎日ログインするだけでポイントがもらえます。連続ログインでボーナスポイントも！',
    guideBonusDaily: '毎日ログインで +10pt',
    guideBonus7day: '7日連続で +50pt ボーナス',
    guideBonus30day: '30日連続で +150pt ボーナス',
    guideProfileTitle: 'プロフィール & 招待',
    guideProfileDesc: 'プロフィールをカスタマイズして、あなたらしいギルド体験を。友達を招待して、コミュニティを一緒に広げましょう。',
    guideProfileCustomize: 'プロフィール画像・表示名を設定',
    guideProfileLocation: 'マップに表示する位置を設定',
    guideProfileInvite: '友達を招待してコミュニティを広げる',
    guideFooterCta: 'FOMUS GUILDに参加しよう',
    guideFooterCtaDesc: '招待コードを持っている方は、今すぐギルドに参加できます。',
    guidePrintNote: 'このページはブラウザの「印刷」機能でPDF保存できます',

    // Update Password Page
    updatePassword: 'パスワードを更新',
    newPassword: '新しいパスワード',
    confirmPassword: 'パスワード（確認）',
    passwordMinLength: 'パスワードは6文字以上で入力してください',
    passwordMismatch: 'パスワードが一致しません',
    passwordUpdated: 'パスワードを更新しました。ダッシュボードに移動します...',
    backToLogin: 'ログインページに戻る',
    sixOrMoreChars: '6文字以上',
    enterAgain: 'もう一度入力',
  },
  en: {
    // Landing Page
    landingTitle: 'Join the Global MASU Community',
    landingSubtitle: 'FOMUS GUILD is an invitation-only community connecting MASU enthusiasts worldwide',
    joinGuild: 'Join Guild',
    login: 'Login',
    features: 'Features',
    feature1Title: 'Digital Membership Card',
    feature1Desc: 'Get exclusive benefits with your unique digital membership card',
    feature2Title: 'Global Network',
    feature2Desc: 'Connect with MASU enthusiasts around the world',
    feature3Title: 'Exclusive Benefits',
    feature3Desc: 'Access member-only discounts and events',
    howToJoin: 'How to Join',
    step1: 'Receive an invite code from an existing member',
    step2: 'Register with your email',
    step3: 'Start your membership',
    invitationOnly: 'Invitation Only Community',
    invitationOnlyDesc: 'FOMUS GUILD is invitation-only. Please get an invite code from an existing member.',
    haveInviteCode: 'Have an invite code?',
    enterInviteCode: 'Enter invite code',
    alreadyMember: 'Already a member?',

    // Invite Page
    welcomeToGuild: 'Welcome to FOMUS GUILD',
    youveBeenInvited: "You've been invited to join an exclusive community",
    enterEmail: 'Enter your email',
    continueWithEmail: 'Continue with Email',
    freeInvitation: 'Invitation (Free)',
    afterVerification: "After verification, you'll be asked to complete a $10/month subscription",
    freeAccess: "You'll get free access to FOMUS GUILD. No payment required.",
    checkYourEmail: 'Check Your Email',
    magicLinkSent: "We've sent a magic link to",
    clickLinkToRegister: 'Click the link in the email to continue your registration',
    invalidInvitation: 'Invalid Invitation',
    invalidInvitationDesc: 'This invitation code is not valid. Please contact the person who invited you.',
    invitationUsed: 'Invitation Used',
    invitationUsedDesc: "This invitation has already been used. If you've already registered, please log in.",
    goToLogin: 'Go to Login',
    returnHome: 'Return Home',
    proceedToPayment: 'Proceed to Payment',
    verifyingPayment: 'Verifying payment...',
    sendingEmail: 'Sending email...',
    paymentComplete: 'Payment Complete!',
    errorOccurred: 'An Error Occurred',
    invalidSession: 'Invalid session',

    // Login Page
    loginTitle: 'FOMUS GUILD',
    loginSubtitle: 'Join the global MASU community',
    newRegistration: 'New Registration',
    existingMemberLogin: 'Existing Member Login',
    enterRegisteredEmail: 'Enter your registered email address',
    emailAddress: 'Email Address',
    sendLoginLink: 'Login',
    sending: 'Sending...',
    loginLinkSent: "We've sent a login link to your email. Please check your inbox.",
    inviteCode: 'Invite Code',
    inviteCodePlaceholder: 'e.g., ABC12345',
    noInviteCode: "If you don't have an invite code, please get one from an existing member",
    next: 'Next',
    checking: 'Checking...',
    invalidCode: 'This invite code is invalid',
    codeAlreadyUsed: 'This invite code has already been used',
    inviteConfirmed: 'Invite Code Confirmed',
    freeInvite: '(Free Invite)',
    sendRegisterLink: 'Send Registration Link',
    changeInviteCode: '← Change invite code',
    freeJoinGuild: 'Join FOMUS GUILD for free',
    paidJoinGuild: 'After email verification, join with $10/month subscription',
    checkEmailForRegister: 'Check Your Email',
    registerLinkSent: "We've sent a registration link to",
    clickLinkToComplete: 'Click the link in the email to complete registration',
    backToHome: '← Back to Home',

    // Subscribe Page
    membershipTitle: 'FOMUS GUILD Membership',
    membershipDesc: 'Get full access as a guild member',
    redirectingToPayment: 'Redirecting to payment...',
    paymentCanceled: 'Payment was canceled. Please try again.',
    benefit1: 'Digital Membership Card',
    benefit2: 'View members on Guild Map',
    benefit3: 'Join quests and earn points',
    benefit4: 'Member-only benefits & offers',
    subscribeJapan: 'Subscribe for ¥980/month',
    subscribeIntl: 'Subscribe for $10/month',
    cancelAnytime: 'Cancel anytime. Payments are securely processed by Stripe.',
    logout: 'Logout',

    // Pending Page
    pendingWelcome: 'Welcome to FOMUS GUILD!',
    pendingActiveRedirecting: 'Your membership is now active. Redirecting to your dashboard...',
    pendingActivating: 'Activating Your Membership',
    pendingProcessing: 'We\'re processing your payment. This usually takes just a few seconds...',
    pendingTakingLong: 'Taking longer than expected?',
    pendingTryRefresh: 'If this persists, please refresh the page or contact support.',
    pendingRefresh: 'Refresh Status',

    // Header
    membershipCard: 'Membership Card',

    // Card
    guildMember: 'Guild Member',
    memberSince: 'Member Since',
    points: 'Guild EXP',
    rank: 'Rank',

    // Navigation
    card: 'Card',
    map: 'Map',
    offers: 'Quests',
    profile: 'Profile',
    admin: 'Admin',

    // Dashboard
    dashboard: 'Dashboard',
    masuPoints: 'MASU Points',
    noActivity: 'No activity yet',
    maxRank: 'Max Rank',
    notSet: 'Not set',
    ptsToNext: 'pts to next',

    // Recent Activity
    recentActivity: 'Recent Activity',
    hubCheckin: 'Hub Check-in',
    eventAttendance: 'Event Attendance',
    welcomeBonus: 'Welcome Bonus',

    // Map
    members: 'Members',
    hubs: 'Hubs',
    masuHubs: 'MASU Hubs',
    searchPlaceholder: 'Search by name, city, country...',
    allCountries: 'All Countries',
    clearFilters: 'Clear filters',
    showing: 'Showing',
    clickMapToSelect: 'Click on the map to select location',
    cancel: 'Cancel',
    shopName: 'Shop Name',
    description: 'Description',
    country: 'Country',
    city: 'City',
    location: 'Location',
    change: 'Change',
    addShop: 'Add Shop',
    saving: 'Saving...',
    openInGoogleMaps: 'Open in Google Maps',
    website: 'Website',

    // Offers
    guildOffers: 'Guild Offers',
    partnerCafeDiscount: '10% Off at Partner Cafe',
    showMemberCard: 'Show your member card for discount',
    freeCoworkingPass: 'Free Coworking Day Pass',
    validAtAllHubs: 'Valid at all MASU Hubs worldwide',
    exclusiveEventAccess: 'Exclusive Event Access',
    priorityAccess: 'Priority access to guild events',
    vipLoungeAccess: 'VIP Lounge Access',
    premiumFacilities: 'Access to premium facilities',

    // Profile
    memberSinceDate: 'Member since',
    rankProgress: 'Rank Progress',
    pointsToNextRank: 'points to next rank',
    editProfile: 'Edit Profile',
    manageSubscription: 'Manage Subscription',
    managingSubscription: 'Redirecting...',
    signOut: 'Sign Out',
    inviteFriends: 'Invite Friends',
    inviteFriendsDesc: 'Generate invite codes to invite friends to FOMUS GUILD. They will join as monthly subscribers.',
    generateInviteCode: 'Generate Invite Code',
    inviteCodeCreated: 'Invite code created!',
    inviteUrlCopied: 'Invite URL copied to clipboard',
    showGeneratedCodes: 'Show generated codes',
    generatedCodes: 'Generated codes',
    unused: 'Unused',
    used: 'Used',
    copyUrl: 'Copy URL',
    copyCode: 'Code',
    copyLink: 'Link',
    tapToCopy: 'Tap to copy',
    copied: 'Copied!',
    noCodesYet: "You haven't generated any invite codes yet",

    // Admin
    adminPanel: 'Admin Panel',
    invites: 'Invites',
    inviteCodes: 'Invite Codes',
    generate: 'Generate',
    available: 'Available',

    // OTP / Verification
    enterVerificationCode: 'Enter Verification Code',
    verificationCode: 'Verification Code',
    codeSentTo: 'Enter the code sent to your email',
    verifyAndLogin: 'Verify & Login',
    verifyAndRegister: 'Verify & Register',
    register: 'Register',
    sendVerificationCode: 'Send Verification Code',
    changeEmail: 'Change email address',
    invalidCodeRetry: 'Invalid code. Please try again.',
    invalidCodeError: 'Invalid code',
    loggingIn: 'Logging in...',
    codeSentSuccess: 'Verification code sent to your email.',
    serverError: 'A server error occurred. Please try again later.',

    // Map Page
    guildMap: 'Guild Map',
    exploreMembers: 'Explore members and MASU Hubs around the world',
    exploreHubs: 'Explore MASU Hubs around the world',
    upgradeSeeMembers: 'Upgrade to see member locations',
    upgradeSeeMembersDesc: 'Free members can only view MASU Hub locations. Upgrade to see all guild members on the map.',
    upgrade: 'Upgrade',
    fullscreen: 'Fullscreen',
    viewFullscreen: 'View fullscreen',
    search: 'Search...',
    clear: 'Clear',
    showingResults: 'Showing',
    membersCount: 'Members',
    hubsCount: 'Hubs',
    pendingInvites: 'Pending',

    tapToFlip: 'Tap to flip',

    // Offers Page
    offersTitle: 'Offers',
    memberOffersAndQuests: 'Member-only benefits and quests',
    upgradeForOffers: 'Upgrade required to access offers',
    upgradeForOffersDesc: 'Service offers and quests are for paid members only. Upgrade your membership to access discounts, special challenges, and more.',
    fomusServices: 'FOMUS Services',
    quests: 'Quests',
    noQuestsAvailable: 'No quests currently available',
    stayTuned: 'Stay tuned for new challenges!',
    exclusiveArticles: 'Articles',
    noArticlesAvailable: 'No articles currently available',
    stayTunedArticles: 'Stay tuned for new articles!',
    comingSoon: 'Coming Soon',
    pointExchange: 'Point Exchange',
    pointExchangeDesc: 'Accumulated points will be exchangeable for various products and services in the future.',
    pointExchangeComingSoon: 'Exchange items will be added gradually',
    pointExchangeStayTuned: 'Stay tuned!',
    statusPoints: 'Guild EXP',
    exchangeHistory: 'Exchange History',
    exchangeConfirm: 'Exchange this item?',
    exchangeSuccess: 'Exchange request submitted!',
    exchangeInsufficientPoints: 'Insufficient points',
    exchangeOutOfStock: 'Out of stock',
    exchangeStatusPending: 'Pending',
    exchangeStatusApproved: 'Approved',
    exchangeStatusRejected: 'Rejected',
    exchangeStatusCanceled: 'Canceled',
    exchangeCouponCode: 'Coupon Code',
    exchangePointsCost: 'Points Required',
    exchangeStock: 'Stock',
    exchangeStockUnlimited: 'Unlimited',
    exchangeApprove: 'Approve',
    exchangeReject: 'Reject',
    exchangeCreateItem: 'Create Item',
    exchangeEditItem: 'Edit Item',
    exchangeItemName: 'Item Name',
    exchangeItemNameEn: 'Item Name (English)',
    exchangeItemDesc: 'Description',
    exchangeItemDescEn: 'Description (English)',
    exchangeButton: 'Exchange',
    exchangeOrders: 'Exchange Orders',
    exchangeItems: 'Exchange Items',
    exchangeBalance: 'MASU Points Balance',
    invitesLabel: 'Invites',
    // Quest Card & Modal
    questTypePhoto: 'Photo Quest',
    questTypeCheckin: 'Check-in',
    questTypeAction: 'Action',
    questRepeatable: 'Repeatable',
    questPoints: 'points',
    questCompleted: 'completed',
    questPendingReview: 'pending review',
    questSubmitPhoto: 'Submit Photo',
    questChallenge: 'Challenge',
    questOnApproval: 'on approval',
    questDropImage: 'Drop image here or click to upload',
    questMaxFileSize: 'Max 5MB, JPG/PNG/GIF',
    questClickToChange: 'Click or drag to change',
    questCommentLabel: 'Comment (Optional)',
    questCommentPlaceholder: 'Add a comment...',
    questCancel: 'Cancel',
    questSubmit: 'Submit',
    questPreviousSubmissions: 'Your Previous Submissions',
    questStatusApproved: 'Approved',
    questStatusRejected: 'Rejected',
    questStatusPending: 'Pending',
    questErrorImageOnly: 'Please upload an image file',
    questErrorFileSize: 'File size must be less than 5MB',
    questErrorSelectImage: 'Please select an image',
    questErrorUploadFailed: 'Failed to upload image',
    questErrorSubmitFailed: 'Failed to create submission',
    questErrorGeneral: 'An error occurred',
    fomusDesc: 'A creative brand that combines art, storytelling, and technology, starting from the traditional Japanese craft "MASU."',
    masuDesc: 'The origin of FOMUS. The highest quality MASU made from domestic Japanese cypress.',
    masuPhotoDesc: 'A global art project of photographing with MASU. Currently in 15 countries as of Dec 2025. MASU enables expression connecting people and cultures.',
    fomusParureDesc: "A jewelry brand utilizing the world's smallest MASU.",
    masukameDesc: "The world's only art piece combining MASU (prosperity) and turtle (longevity).",
    kukuDesc: 'A story about spirits and tree gods. An epic tale expanding into picture books, novels, anime, and merchandise. Currently in production.',
    silvaDesc: "The world's first card game you can play with MASU. Enjoyable for children to seniors.",
    architectureDesc: 'Supporting culture, tradition, and brands. From story design to implementation.',
    sagishimaDesc: 'An art gallery on Sagishima Island, Hiroshima. Producing the "MASU Wall" and "MASU Frames."',

    // Profile Page
    profileSettings: 'Profile Settings',
    personalInfo: 'Personal Information',
    displayName: 'Display Name',
    profileImage: 'Profile Image',
    profileImageDesc: 'Will be cropped to a square and displayed as your icon on the map (max 500MB, auto-compressed)',
    masuPhotoRecommend: 'If you have a Masu Photo, we recommend using it as your profile icon!',
    locationMissing: 'Please enter your country, state, and city so you can appear on the map!',
    questProfileComplete: 'Quest Complete! "Complete Your Profile"',
    questMapVisible: 'Quest Complete! "Show Yourself on the Map"\nYour profile is now displayed on the map!',
    questPointsEarned: 'pts earned!',
    selectImage: 'Select Image',
    compressing: 'Compressing...',
    removeImage: 'Remove',
    locationInputNote: 'You can enter in Japanese or English (e.g., Japan, Tokyo)',
    countryLabel: 'Country',
    stateLabel: 'State',
    cityLabel: 'City',
    pinLocation: 'Pin Location',
    geocodingLabel: 'Locating...',
    reGeocode: 'Re-geocode from address',
    adjustPinDesc: 'Tap/pinch to zoom and adjust pin location on the map',
    setPinDesc: 'Locating from address... Tap map to set pin',
    showLocationOnMap: 'Show location on map',
    showLocationDesc: 'Allow other members to see your location on the Guild Map',
    saveChanges: 'Save Changes',
    membership: 'Membership',
    membershipIdLabel: 'Membership ID',
    statusLabel: 'Status',
    active: 'Active',
    inactive: 'Inactive',
    email: 'Email',
    viewProfileLink: 'View profile →',
    fileTooLarge: 'File size is too large',
    selectImageFile: 'Please select an image file',
    imageUploaded: 'Image uploaded',
    imageUploadFailed: 'Failed to upload image',
    profileUpdated: 'Profile updated successfully',

    // Language
    languageSetting: 'Language',
    languageSettingDesc: 'Switch the display language',
    japanese: '日本語',
    english: 'English',

    // UpgradeBanner
    upgradeToUnlock: 'Upgrade to Unlock',
    upgradeFeatureDesc: 'This feature is available for paid members. Upgrade your membership to access all features.',
    upgradeNow: 'Upgrade Now',
    freeViewHubs: 'Free members can view MASU Hub locations on the map',

    // Super Admin
    superAdmin: 'Super',

    // Guide Page
    guideTitle: 'User Guide',
    guideEnterGuild: 'Enter the Guild',
    guideWhatIsTitle: 'What is FOMUS GUILD?',
    guideWhatIsDesc: 'FOMUS GUILD is an invitation-only community connecting people worldwide through the Japanese traditional craft of MASU. Members are welcomed not as users, but as companions in cultural creation.',
    guideWhatIsInvite: 'Join through an invitation from an existing member',
    guideWhatIsGlobal: 'Connect with members around the world',
    guideWhatIsCulture: 'Help spread MASU culture together',
    guideCardTitle: 'Membership Card',
    guideCardDesc: 'When you join the guild, a digital membership card is issued. It displays your rank, points, and member number — proof of your guild activity.',
    guideCardRankSystem: '7-Tier Rank System',
    guideCardRanks: 'E → D → C → B → A → S → SS',
    guideCardRankDesc: 'Earn points to rank up! Your rank increases with activity.',
    guideMapTitle: 'Guild Map',
    guideMapDesc: 'See the distribution of members worldwide on the map. Discover MaSU Hubs (partner shops & spots) and build real-world connections.',
    guideMapMembers: 'View member locations on a world map',
    guideMapHubs: 'Discover MaSU Hubs (partner spots)',
    guideMapConnect: 'Build real-world connections',
    guideQuestTitle: 'Quests & Benefits',
    guideQuestDesc: 'Participate in quests to earn points. Access FOMUS-related services and enjoy member-exclusive benefits.',
    guideQuestEarn: 'Complete quests to earn points',
    guideQuestServices: 'Access FOMUS-related services',
    guideQuestArticles: 'Exclusive articles (coming soon)',
    guideQuestExchange: 'Exchange accumulated points for products and services in the future',
    guideBonusTitle: 'Login Bonus',
    guideBonusDesc: 'Earn points just by logging in every day. Consecutive login streaks give you bonus points!',
    guideBonusDaily: 'Daily login: +10pt',
    guideBonus7day: '7-day streak: +50pt bonus',
    guideBonus30day: '30-day streak: +150pt bonus',
    guideProfileTitle: 'Profile & Invites',
    guideProfileDesc: 'Customize your profile for a personalized guild experience. Invite friends to grow the community together.',
    guideProfileCustomize: 'Set your profile image & display name',
    guideProfileLocation: 'Set your location on the map',
    guideProfileInvite: 'Invite friends to grow the community',
    guideFooterCta: 'Join FOMUS GUILD',
    guideFooterCtaDesc: 'If you have an invite code, you can join the guild right now.',
    guidePrintNote: 'You can save this page as PDF using your browser\'s Print function',

    // Update Password Page
    updatePassword: 'Update Password',
    newPassword: 'New Password',
    confirmPassword: 'Confirm Password',
    passwordMinLength: 'Password must be at least 6 characters',
    passwordMismatch: 'Passwords do not match',
    passwordUpdated: 'Password updated. Redirecting to dashboard...',
    backToLogin: 'Back to Login',
    sixOrMoreChars: '6 or more characters',
    enterAgain: 'Enter again',
  },
}

type Translations = typeof translations.en

interface LanguageContextType {
  language: Language
  setLanguage: (lang: Language) => void
  t: Translations
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined)

// Get saved language or detect from browser
export function getInitialLanguage(): Language {
  if (typeof window === 'undefined') return 'en'

  const saved = localStorage.getItem(LANGUAGE_KEY) as Language | null
  if (saved && (saved === 'ja' || saved === 'en')) {
    return saved
  }

  // Auto-detect from browser
  const browserLang = navigator.language || ''
  if (browserLang.startsWith('ja')) {
    return 'ja'
  }

  return 'en'
}

// Get translations without context (for pages without provider)
export function getTranslations(lang: Language): Translations {
  return translations[lang]
}

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>('en')
  const [isLoaded, setIsLoaded] = useState(false)

  // Load language from localStorage on mount
  useEffect(() => {
    const lang = getInitialLanguage()
    setLanguageState(lang)
    setIsLoaded(true)
  }, [])

  // Save language to localStorage when changed
  const setLanguage = (lang: Language) => {
    setLanguageState(lang)
    localStorage.setItem(LANGUAGE_KEY, lang)
  }

  const t = translations[language]

  // Prevent flash of wrong language
  if (!isLoaded) {
    return null
  }

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  )
}

export function useLanguage() {
  const context = useContext(LanguageContext)
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider')
  }
  return context
}
